<view class="container">
  <camera 
    device-position="{{devicePosition}}" 
    flash="off" 
    binderror="error"
    style="width: 100%; height: 100%;">
    
    <cover-view class="controls">
      <cover-view 
        class="switch-camera" 
        bindtap="switchCamera">
        <cover-image 
          class="icon"
          src="/static/icons/switch.png">
        </cover-image>
      </cover-view>
      
      <cover-view 
        class="take-photo" 
        bindtap="takePhoto">
        <cover-image 
          class="icon"
          src="/static/icons/camera.png">
        </cover-image>
      </cover-view>

      <cover-view 
        class="switch-filter" 
        bindtap="switchFilter">
        <cover-view class="filter-text">{{currentFilter}}</cover-view>
      </cover-view>
    </cover-view>
  </camera>

  <canvas canvas-id="filterCanvas" style="width: 100%; height: 100%; position: fixed; left: -9999px;"></canvas>

  <view class="preview-container" wx:if="{{tempImagePath}}">
    <image mode="aspectFit" src="{{tempImagePath}}"></image>
    <view class="preview-buttons">
      <button bindtap="savePhoto">保存照片</button>
      <button bindtap="retake">重拍</button>
    </view>
  </view>
</view> 